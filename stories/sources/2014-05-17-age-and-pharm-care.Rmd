---
title: Зв'язок між віком провізорів та їх поглядами на фармопіку: непараметричне тестування відмінностей між групами
author: Девіняк Олег
tags: [R, основи статистики, р-величина, множинні порівняння, непараметричні методи, критерій Уілкоксона, критерій Краскела-Уолліса]
date: "2014-05-17"
layout: post
category: myblog
--- 

Фармацевтична опіка - ключова функція працівника аптеки. Узявши на себе відповідальність з надання фармацевтичної опіки, провізор стає важливою ланкою системи охорони здоров'я. Однак процедура надання фармацевтичної опіки досі не має чіткої регламентації та юридичного базису. У цьому напрямку ведуться наукові роботи, зокрема вивчається питання створення клініко-фармацевтичної служби в аптечних закладах (<a href="http://stat.org.ua/blog/stories/age-and-pharm-care/#boretska">Борецька О.Б.</a>). В контексті цього дослідження проведено анкетування працівників аптек стосовно їхньої думки щодо різних аспектів фармацевтичної опіки. Давайте розглянемо фрагмент аналізу результатів анкетування: дослідження зв'язку між віком провізорів та їхніми відповідями на ряд питань.

Вйо до діла: завантажимо дані.

```{r}
anketa=read.csv("http://stat.org.ua/data/pharmcare-survey.csv")
names(anketa) #подивимось що там за стовпчики 
```

Отже, перший стовпчик - вік, а інші містять відповіді на запитання анкети. Питання "Звідки Ви отримуєте інформацію, щодо раціонального застосування лікарських засобів?" мало можливість множинного вибору відповідей, тому кожен з варіантів має свій стовпчик. Завдання дослідження зв'язку між віком провізорів та відповідями на питання зводиться до порівняння вікових груп, утворених різними відповідями. Щоб вибрати між параметричними та непараметричними методами дослідження відмінностей між групами, слід перевірити, чи розподіл віку подібний до нормального розподілу. Для цього подивимось на квантиль-квантильний нормальний графік (*інспекція графіку*):

```{r}
qqnorm(anketa$вік)
```

При нормальному розподілі точки на графіку лежали би на одній прямій. У даному випадку розподіл сильно відрізняється від нормального. Тому слід використовувати непараметричні методи: критерій Уілкоксона-Манна-Уітні для порівняння двох груп та критерій Краскела-Уолліса для порівняння багатьох груп.

Почнемо по порядку, із зв'язку між віком та відповіддю на питання "Як часто Ви проводите моніторинг (перевірку) призначення лікарських засобів на предмет їх взаємодії?". Подивимось спочатку на кількість варіантів та їх розподіл.

```{r}
table(anketa$як.часто.ви.проводите.моніторинг)
```

Більшість працівників стверджують, що завжди проводять моніторинг. Всього є 5 різних варіантів відповіді, тому використовуєм критерій Краскела-Уолліса:

```{r}
kruskal.test(anketa$вік~anketa$як.часто.ви.проводите.моніторинг)
```

Зв'язок не є статистично значимим. Враховуючи, що розмір вибірки досить великий:

```{r}
nrow(anketa)
```

то можна казати, що зв'язку немає як такого. Частота проведення моніторингу взаємодій лікарських засобів не залежить від віку працівника.

Ідем далі: питання "Чи консультуєте Ви пацієнта з питань правильного застосування  лікарських засобів?"

```{r}
table(anketa$чи.конс..Ви.пацієнта.з.питань.правильного.заст.ЛЗ) 
```
5 варіантів, критерій Краскела-Уолліса:

```{r}
kruskal.test(anketa$вік~anketa$чи.конс..Ви.пацієнта.з.питань.правильного.заст.ЛЗ)
```

\\(p\approx0.066\\), тому також кажемо про відсутність статистичної значимості. Однак \\(р\\) не таке вже й велике, отже підстав щоб заперечувати зв'язок небагато. Залишаємось із висновком, що гіпотеза про зв'язок між віком та цим питанням у даному дослідженні не підтверджена, але й не спростована.

Наступне питання звучало так: "Чи часто звертаєте увагу пацієнтів на правила зберігання лікарських засобів?"

```{r}
table(anketa$зберігання.ЛЗ)
```
5 варіантів, критерій Краскела-Уолліса:

```{r}
kruskal.test(anketa$вік~anketa$зберігання.ЛЗ)
```

Аналогічно, статистична значимість відсутня.

Ну і залишився блок стовпчиків стосовно питання про джерела інформації. Тут кожен стовпчик може мати два значення: формулювання вибраного варіанту, або пустий рядок, якщо цей варіант не було вибрано. Ну ось наприклад:

```{r}
table(anketa$Інформація.рац..Заст.1)
```

Отже, для довідників:

```{r}
wilcox.test(anketa$вік~anketa$Інформація.рац..Заст.1)
```

p-величина велика, люди різних вікових категорій користуються довідниками з однаковою частотою.

Наступне:

```{r}
table(anketa$Інформація.рац..Заст.2)
wilcox.test(anketa$вік~anketa$Інформація.рац..Заст.2)
```

\\(р=0.000235\\) - отже, користування інтернетом залежить від віку працівника. Подивимось на цю залежність - виведемо графік "ящик з вусами":

```{r}
boxplot(anketa$вік~anketa$Інформація.рац..Заст.2)
```
Помітно, що інтернетом користуються більше молодші працівники. Що ж, нічого дивного в цьому немає. Котимось до наступного цікавого варіанту: хто читає огляди клінічних досліджень:

```{r}
table(anketa$Інформація.рац..Заст.3)
wilcox.test(anketa$вік~anketa$Інформація.рац..Заст.3)
```

Ви може думаєте, що р<0.05, а значить - статистична значимість. Не все так просто. Якщо Ви так подумали - почитайте про [множинні порівняння](http://stat.org.ua/blog/donewrong/try-try-again/). Ми тут проводили 3 критерії Краскела-Уолліса, це третій критерій Уілкоксона-Манна-Уітні, і ще збираємось зробити три Уілкоксони. Разом 9. Якщо брати найпростіший метод для роботи з множинними порівняннями - корекцію Бонферроні, то наш рівень \\(\alpha\\), з яким треба порівнювати р-величину, не 0.05, а \\(0.05/9=0.00556\\). Получається трохи більше. Але якщо застосувати хитріший метод - [контроль частки хибних відкриттів](http://stat.org.ua/blog/donewrong/the-controlling-of-false-discovery-rate/) - то ми впишемось (бо ми вже знайшли один статистично значимий результат, і це буде другий) і зможем стверджувати статистичну значимість. З іншого боку, наша вибірка велика, тому використання критерія Стьюдента - не такий вже і гріх (нас милує теорема про центральну границю):

```{r}
t.test(anketa$вік~anketa$Інформація.рац..Заст.3)
```

І маємо таке р, яке виконує вимоги корекції Бонферроні. От з таким важким виправданням говоримо, що зв'язок статистично значимий. Дивимось на розподіл:


```{r}
boxplot(anketa$вік~anketa$Інформація.рац..Заст.3)
```

Старші люди ніби-то частіше читають огляди клінічних досліджень. Ви в це вірите? Я ні. Просто такі респонденти більше хочуть здаватись розумними.

ОК, їдем далі:

```{r}
table(anketa$Інформація.рац..Заст.4)
wilcox.test(anketa$вік~anketa$Інформація.рац..Заст.4)
```

Медичні-фармацевтичні представники. Їх слухає біля половини провізорів. Зв'язок із віком не простежується.

А тепер щодо варіанту "проходжу навчання щодо заданої проблеми"

```{r}
table(anketa$Інформація.рац..Заст.5)
wilcox.test(anketa$вік~anketa$Інформація.рац..Заст.5)
```

Ну що ж, навчання проходять небагато провізорів - принаймні чесно. Зв'язок не є статистично значимим (пам'ятаєте про множинні порівняння?).

І останній варіант - "покладаюсь на власний досвід"

```{r}
table(anketa$Інформація.рац..Заст.6)
wilcox.test(anketa$вік~anketa$Інформація.рац..Заст.6)
```

Таких людей небагато, але подивіться, яка хороша статистична значимість. Подивимось:

```{r}
boxplot(anketa$вік~anketa$Інформація.рац..Заст.6)
```

Старші люди частіше покладаються на власний досвід. Ну, це справделиво - в них того досвіду більше.

На такій оптимістичній ноті дозвольте відкланятись. Радий буду коментарям.

___

<div class="nohover">
<a name="boretska", id="anchor">Організаційно-методичні засади створення та діяльності клініко-фармацевтичної служби в аптечних закладах України : автореф. дис. на здобуття наук. ступеня канд. фармац. наук : [спец.] 15.00.01 “Технологія ліків, організація фармацевтичної справи та судова фармація” / О. Б. Борецька ; Львів. нац. мед. ун-т ім. Данила Галицького. – Львів, 2013. – 24 с.</a>
</div>

